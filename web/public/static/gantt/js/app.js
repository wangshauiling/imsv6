(function(t){function e(e){for(var n,r,i=e[0],l=e[1],d=e[2],g=0,u=[];g<i.length;g++)r=i[g],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(u.length)u.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),o={class:"form-element"};function s(t,e,a,s,r,i){var l=Object(n["q"])("left-thead");return Object(n["k"])(),Object(n["c"])("div",o,[Object(n["d"])(l,{ref:"sonRef",data:s.state,onTaskClick:s.taskClick,onTaskRightClick:s.taskRightClick,onTaskDrop:s.taskDrop,onTaskRowRightClick:s.taskRowRightClick,onTaskRowClick:s.taskRowClick,onTaskMouseEnter:s.taskMouseEnter,onTaskMouseLeave:s.taskMouseLeave,onTaskDragStart:s.taskDragStart,onTaskDragEnd:s.taskDragEnd,onTaskMousemove:s.taskMousemove,onTaskWidthResize:s.taskWidthResize},null,8,["data","onTaskClick","onTaskRightClick","onTaskDrop","onTaskRowRightClick","onTaskRowClick","onTaskMouseEnter","onTaskMouseLeave","onTaskDragStart","onTaskDragEnd","onTaskMousemove","onTaskWidthResize"])])}a("159b"),a("b0c0");var r=Object(n["w"])("data-v-4094dbd2");Object(n["m"])("data-v-4094dbd2");var i={class:"gantt unselectable",ref:"gantt"},l={class:"gantt-side",ref:"ganttSideRef"},d={class:"gantt-side-background"},c=Object(n["d"])("div",{class:"gantt-header-row gantt-side-header-row"},null,-1),g={style:{position:"relative"}},u=Object(n["d"])("div",{class:"gantt-row-label gantt-row-background"},null,-1),f={class:"gantt-corner-area",ref:"area"},p={class:"gantt-corner-area-content"},h={class:"gantt-column-header"},m={class:"gantt-label-text"},v={class:"gantt-side-content"},w={class:"gantt-tree-header-row"},D={class:"gantt-tree-root"},k={class:"gantt-valign-container"},y={class:"side-element"},b={class:"gantt-side-content-table"},T={class:"gantt-table-column"},O={class:"gantt-table-header-row"},j={class:"gantt-tree-root"},x={class:"gantt-valign-container"},C={class:"gantt-table-column"},M={class:"gantt-table-header-row"},L={class:"gantt-tree-root"},R={class:"gantt-valign-container"},H=Object(n["d"])("div",{class:"gantt-resizer-display"},null,-1),F={class:"gantt-scrollable-header"},W={class:"gantt-header-row gantt-header-row-first"},P={class:"gantt-header-row gantt-header-row-last"},N={class:"gantt-body-background"},E=Object(n["d"])("div",{class:"gantt-row-background"},null,-1),B={class:"gantt-body-columns"},S={class:"gantt-body-rows",ref:"ganttBodyRows"},Y=Object(n["d"])("div",{class:"gantt-task-foreground"},null,-1),I={class:"gantt-task-content"};Object(n["l"])();var X=r((function(t,e,a,o,s,r){return Object(n["k"])(),Object(n["c"])("div",i,[Object(n["d"])("div",l,[Object(n["d"])("div",d,[Object(n["d"])("div",{class:"gantt-side-background-header",style:{height:o.state.ganttHeaderHeight+"px"}},[c],4),Object(n["d"])("div",{class:"gantt-side-background-body",style:{height:o.state.gridHeight},ref:"ganttLeftBgBody"},[Object(n["d"])("div",g,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.leftTheadDatas,(function(t,e){return Object(n["k"])(),Object(n["c"])("div",{class:["gantt-row gantt-row-height",o.state.getRowOddEven(e)],key:e,style:{height:o.state.ganttRowHeight}},[u],6)})),128))])],4)]),Object(n["d"])("div",f,[Object(n["d"])("div",p,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.headers,(function(t){return Object(n["k"])(),Object(n["c"])("div",{class:"gantt-header-row",key:t},[Object(n["d"])("div",h,[Object(n["d"])("span",m,Object(n["r"])(t),1)])])})),128))])],512),Object(n["d"])("div",v,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.titleKeyList,(function(t,e){return Object(n["k"])(),Object(n["c"])("div",{class:"side-element",key:e},[Object(n["d"])("div",{class:"gantt-tree-header",style:{height:o.state.ganttHeaderHeight+"px"}},[Object(n["d"])("div",w,[Object(n["d"])("span",{class:"gantt-label-text",title:o.state.titleNameList[e]},Object(n["r"])(o.state.titleNameList[e]),9,["title"])])],4),Object(n["d"])("div",{class:"gantt-tree-body",ref:o.setGanttTreeBodyRef,style:{height:o.state.gridHeight}},[Object(n["d"])("ol",D,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.leftTheadDatas,(function(t){return Object(n["k"])(),Object(n["c"])("li",{class:"vue-ui-tree-node gantt-label-text",key:t},[Object(n["d"])("div",{class:"gantt-row-label gantt-row-height",style:{height:o.state.ganttRowHeight}},[Object(n["d"])("div",k,[Object(n["d"])("div",{class:"gantt-valign-content",style:{minWidth:o.state.leftHeadMinWidth}},[Object(n["d"])("span",null,Object(n["r"])(t[o.state.titleKeyList[e]]),1)],4)])],4)])})),128))])],4)])})),128)),Object(n["d"])("div",y,[Object(n["d"])("div",b,[Object(n["d"])("div",T,[Object(n["d"])("div",{class:"gantt-table-header",style:{height:o.state.ganttHeaderHeight+"px"}},[Object(n["d"])("div",O,[Object(n["d"])("span",{class:"gantt-label-text",title:o.state.from},Object(n["r"])(o.state.from),9,["title"])])],4),Object(n["d"])("div",{class:"gantt-table-content",ref:"ganttTableContent1",style:{height:o.state.gridHeight}},[Object(n["d"])("ol",j,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.leftTheadDatas,(function(t){return Object(n["k"])(),Object(n["c"])("li",{class:"vue-ui-tree-node gantt-label-text",key:t},[Object(n["d"])("div",{class:"gantt-row-label gantt-row-height",style:{height:o.state.ganttRowHeight}},[Object(n["d"])("div",x,[Object(n["d"])("div",{class:"gantt-valign-content",style:{minWidth:o.state.leftHeadMinWidth}},[Object(n["d"])("span",null,Object(n["r"])(t.rowPbdate),1)],4)])],4)])})),128))])],4)]),Object(n["d"])("div",C,[Object(n["d"])("div",{class:"gantt-table-header",style:{height:o.state.ganttHeaderHeight+"px"}},[Object(n["d"])("div",M,[Object(n["d"])("span",{class:"gantt-label-text",title:o.state.to},Object(n["r"])(o.state.to),9,["title"])])],4),Object(n["d"])("div",{class:"gantt-table-content",ref:"ganttTableContent2",style:{height:o.state.gridHeight}},[Object(n["d"])("ol",L,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.leftTheadDatas,(function(t){return Object(n["k"])(),Object(n["c"])("li",{class:"vue-ui-tree-node gantt-label-text",key:t},[Object(n["d"])("div",{class:"gantt-row-label gantt-row-height",style:{height:o.state.ganttRowHeight}},[Object(n["d"])("div",R,[Object(n["d"])("div",{class:"gantt-valign-content",style:{minWidth:o.state.leftHeadMinWidth}},[Object(n["d"])("span",null,Object(n["r"])(t.rowPedate),1)],4)])],4)])})),128))])],4)])])])]),Object(n["d"])("div",{class:"gantt-resizer ng-scope ng-isolate-scope gantt-resizer-enabled",onMousedown:e[1]||(e[1]=function(t){return o.state.ganttResizer(t)})},[H],32)],512),Object(n["d"])("div",F,[Object(n["d"])("div",{class:"gantt-header",style:{height:o.state.ganttHeaderHeight+"px"}},[Object(n["d"])("div",{class:"gantt-header-columns",ref:"ganttHeaderColumnsRef",style:{width:o.state.rightContentWidth}},[Object(n["d"])("div",null,[Object(n["d"])("div",W,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.monthList,(function(t){return Object(n["k"])(),Object(n["c"])("div",{class:"gantt-column-header",key:t,style:{width:t.days.length*o.state.dayCellWidth+"px"}},Object(n["r"])(t.days[0].getFullYear()+o.state.i18ns["year"]+(t.days[0].getMonth()+1)+o.state.i18ns["month"]),5)})),128))])]),Object(n["d"])("div",null,[Object(n["d"])("div",P,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.dayList,(function(t){return Object(n["k"])(),Object(n["c"])("div",{class:"gantt-column-header",key:t,style:{width:o.state.dayCellWidth+"px"}},Object(n["r"])(t.getDate()),5)})),128))])])],4)],4)]),Object(n["d"])("div",{class:"gantt-scrollable",ref:"ganttBodyParentRef",onScroll:e[7]||(e[7]=function(t){return o.state.ganttBodyScroll(t)})},[Object(n["d"])("div",{id:"gantt-body",class:"gantt-body",style:{width:o.state.rightContentWidth,height:o.state.rightContentHeight}},[Object(n["d"])("div",N,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.leftTheadDatas,(function(t,e){return Object(n["k"])(),Object(n["c"])("div",{class:["gantt-row gantt-row-height",o.state.getRowOddEven(e)],key:t,style:{height:o.state.ganttRowHeight}},[E],6)})),128))]),Object(n["d"])("div",{ref:"ganttBodyForeground",class:"gantt-body-foreground",style:{backgroundImage:"url("+o.state.foreGroundImg+")"}},[Object(n["u"])(Object(n["d"])("div",{class:"gantt-current-date-line",style:{left:o.state.curentDateLeft+"px"}},null,4),[[n["s"],o.state.curentDateLeft>=0&&o.state.curentDateLeft<=parseFloat(o.state.rightContentWidth)]])],4),Object(n["d"])("div",B,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.dayList,(function(t){return Object(n["k"])(),Object(n["c"])("div",{class:"gantt-column gantt-foreground-col gantt-column-first",key:t,style:{width:o.state.dayCellWidth+"px"}},[Object(n["d"])("div",{class:"gantt-timeframe gantt-timeframe-non-working",style:{width:o.state.dayCellWidth+"px",height:o.state.rightContentHeight}},null,4)],4)})),128))]),Object(n["d"])("div",S,[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.taskData,(function(t,a){return Object(n["k"])(),Object(n["c"])("div",{class:"gantt-row gantt-row-height",key:t,style:{height:o.state.ganttRowHeight}},[Object(n["d"])("div",{class:"gantt-row-content",onDrop:function(t){return o.state.taskDrop(t,a)},onDragover:e[6]||(e[6]=Object(n["v"])((function(){}),["prevent"])),onClick:function(e){return o.taskRowClick(e,t,a)},onContextmenu:function(e){return o.taskRowRightClick(e,t,a)}},[(Object(n["k"])(!0),Object(n["c"])(n["a"],null,Object(n["p"])(o.state.taskData[a].tasks,(function(t,s){return Object(n["u"])((Object(n["k"])(),Object(n["c"])("div",{ref:o.ganttTask,id:o.state.createGanttTaskId(a,s),key:t,draggable:o.state.isDraggable(t),class:o.state.getTaskClass(t),style:o.state.getTaskStyle(t),onDragstart:Object(n["v"])((function(e){return o.taskDragStart(e,t,a,s)}),["self"]),onDrag:e[2]||(e[2]=Object(n["v"])((function(){return o.taskDraging&&o.taskDraging.apply(o,arguments)}),["self"])),onDragend:Object(n["v"])((function(e){return o.taskDragEnd(e,t,a,s)}),["self"]),onMouseenter:function(e){return o.state.taskMouseEnter(e,t)},onMouseleave:e[3]||(e[3]=function(){var t;return o.state.taskMouseLeave&&(t=o.state).taskMouseLeave.apply(t,arguments)}),onClick:e[4]||(e[4]=function(){return o.taskClick&&o.taskClick.apply(o,arguments)}),onContextmenu:function(e){return o.taskRightClick(e,t,a,s)},onMousemove:e[5]||(e[5]=function(){var t;return o.state.taskMousemove&&(t=o.state).taskMousemove.apply(t,arguments)})},[Object(n["d"])("div",{class:"gantt-task-background",style:{backgroundColor:t.color}},null,4),Y,Object(n["d"])("div",I,[Object(n["d"])("span",null,Object(n["r"])(t["isMo"]?t.name:t.content),1)])],46,["id","draggable","onDragstart","onDragend","onMouseenter","onContextmenu"])),[[n["s"],o.state.isShowTask(t)]])})),128))],40,["onDrop","onClick","onContextmenu"])],4)})),128))],512)],4)],544)],512)})),_=a("5530"),G=a("53ca"),z=(a("a434"),a("4e82"),a("caad"),a("99af"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("c760"),a("c740"),a("fb6a"),a("a630"),a("3ca3"),function(t,e){t.classList.add(e)}),V=function(t,e){t.classList.remove(e)},J={name:"LeftThead",props:{msg:String,draggable:Boolean,data:Object},emits:{taskClick:null,taskDrop:null,taskMouseEnter:null,taskMouseLeave:null,taskRightClick:null,taskRowRightClick:null,taskRowClick:null,taskDragStart:null,taskDragEnd:null,taskMousemove:null,taskWidthResize:null},setup:function(t,e){var a=e.emit,o=(e.slots,e.attrs,Object(n["o"])("gantt")),s=Object(n["o"])("ganttSideRef"),r=Object(n["o"])("area"),i=Object(n["o"])("ganttBodyParentRef"),l=Object(n["o"])("ganttHeaderColumnsRef"),d=Object(n["o"])("ganttBodyRows"),c=Object(n["o"])("ganttBodyForeground"),g=Object(n["o"])("ganttLeftBgBody"),u=[],f=Object(n["o"])("ganttTableContent1"),p=Object(n["o"])("ganttTableContent2"),h=Object(n["o"])([]),m=function(t){h.value.push(t)},v=function(t){u.push(t)},w=Object(n["n"])({contextMenus:[],cellContextMenus:[],i18ns:{},taskData:[],defaultData:[],ganttHeight:0,leftTheadDatas:[],from:"",to:"",ganttHeaderHeight:64,headers:[],fromDate:new Date,toDate:new Date,dayList:[],weekList:[],monthList:[],dayStandardWidth:240,dayCellWidth:240,rightContentWidth:0,rightContentHeight:0,taskLayerContent:"",foreGroundImg:"",curentDateLeft:0,tooltipsFormat:"",gridHeight:"auto",gridHeightNum:"",ganttRowHeight:"40px",leftHeadMinWidth:"80px",isPartFollow:!1,showTip:!0,oneDayTime:864e5,ganttCreatedDate:new Date,updateFromTo:!1,titleKeyList:["name"],titleNameList:[],scrollToNowDate:!1,displayFromNowDate:!0,allowChangeLine:!0,moTimeSpan:1e4,needFollow:!0,ganttBdateKey:"bs_gantt_bdate",ganttEdateKey:"bs_gantt_edate",useGanttCompute:!0,maxCalCount:20736e4,jsPlumbConfig:{endpoint:["Dot",{radius:8,fill:"#ff5722"}],connectorStyle:{lineWidth:1,strokeStyle:"#4caf50",joinstyle:"round",fill:"pink",outlineColor:"",outlineWidth:""},connectorHoverStyle:{lineWidth:2,strokeStyle:"red",outlineWidth:10,outlineColor:""},paintStyle:{fillStyle:"#4caf50",radius:6},hoverPaintStyle:{fillStyle:"red",strokeStyle:"red"},isSource:!0,connector:["Straight",{gap:0,cornerRadius:5,alwaysRespectStubs:!0}],isTarget:!0,maxConnections:-1,connectorOverlays:[["Arrow",{width:10,length:10,location:1}],["Label",{label:"",cssClass:"",labelStyle:{color:"red"},events:{click:function(t,e){console.log("click on label overlay for :"+t.component),console.log(t),console.log(e)}}}]]},getRowOddEven:function(t){return t%2==0?"gantt-row-odd":"gantt-row-even"},getTaskClass:function(t){var e=["gantt-task"];return e.push(1==t.data.movable?"gantt-movable":"gantt-n-movable"),t["isMo"]?e.push("gantt-isMo"):e.push("gantt-isNotMo"),e},getTaskStyle:function(t){var e=null;if(!t["isMo"]&&!t["showUnplan"])return null;if(w.displayFromNowDate&&new Date(t.lct).getTime()-Date.now()<=0)e={width:0,display:"none",border:0};else{var a=w.getTaskWidth(t.est,t.lct,t);a=a>10?a:10,e={width:a+"px",left:parseFloat(t.left)+"px",zIndex:t.zIndex,display:"block",border:"1px solid #d2d2d2"}}return e},ganttBodyScroll:function(t){if(t.target===i.value){l.value.style.left=-i.value.scrollLeft+"px";var e=t.target.scrollTop;g.value.scrollTop=e;for(var a=0;a<u.length;a++)u[a].scrollTop=e;f.value.scrollTop=e,p.value.scrollTop=e}},getDayList:function(t){if(w.fromDate&&w.fromDate){var e,a;t=t||[],0==t.length?(a=new Date(w.fromDate),t.push(a)):a=t[t.length-1];var n=new Date(a.getFullYear(),a.getMonth(),a.getDate());e=new Date(n.setDate(n.getDate()+1));var o=new Date(w.toDate);return e<new Date(o.setDate(o.getDate()+1))?(t.push(e),w.getDayList(t)):e==new Date(o.setDate(o.getDate()+1))&&t.push(e),t}},getWeekList:function(){for(var t=w.getDayList(),e=[],a={},n=[],o=0;o<t.length;o++){var s=w.getWeekofYear(t[o]);s==a.week||(a.week&&(a.days=n,e.push(a)),a={},n=[],a.week=s),n.push(t[o])}return a.days=n,e.push(a),e},getMonthList:function(){for(var t=w.getDayList(),e=[],a={},n=[],o=0;o<t.length;o++){var s=t[o].getMonth()+1;s==a.month||(a.month&&(a.days=n,e.push(a)),a={},n=[],a.month=s),n.push(t[o])}return a.days=n,e.push(a),e},getWeekofYear:function(t){var e=new Date(t.getFullYear(),0,1),a=Math.round((t.valueOf()-e.valueOf())/864e5);return Math.ceil((a+(e.getDay()+1-1))/7)},getTaskWidth:function(t,e,a){var n=0;return n=w.displayFromNowDate&&a["data"]&&2===a["data"]["mo_stat"]?(new Date(e)-new Date)*w.dayCellWidth/w.oneDayTime:(new Date(e)-new Date(t))*w.dayCellWidth/w.oneDayTime,n>0?n:0},getLeftFromDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0;return a=w.displayFromNowDate&&e["data"]&&2===e["data"]["mo_stat"]?w.curentDateLeft:(new Date(t).getTime()-new Date(w.fromDate).getTime())*w.dayCellWidth/w.oneDayTime,a},convertGanttData:function(t,e){if(!isNaN(new Date(t.from).getFullYear())&&!isNaN(new Date(t.to).getFullYear()))return t.from=w.formatDate(t.from),t.to=w.formatDate(t.to),e&&(t.est||t.lct)||(t.est=t.from,t.lct=t.to),t.width=w.getTaskWidth(t.from,t.to,t),t.left=w.getLeftFromDate(t.from,t),t},getBeginDateFromLeft:function(t){var e=parseFloat(t)/w.dayCellWidth*w.oneDayTime;return w.formatDate(new Date(new Date(w.fromDate).getTime()+e))},getTimeFromWidth:function(t){var e=w.oneDayTime*parseFloat(t)/w.dayCellWidth;return e},upperDateSeconds:function(t){var e=new Date(t);return 0!=e.getSeconds()&&(e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),60)),e},getNewDateWithWidth:function(t,e){var a=null;return a=w.displayFromNowDate&&new Date>new Date(t)?new Date((new Date).getTime()+w.getTimeFromWidth(e)):new Date(new Date(t).getTime()+w.getTimeFromWidth(e)),w.formatDate(a)},getNewDateWithTime:function(t,e){var a=null;return a=w.displayFromNowDate&&new Date>new Date(t)?new Date((new Date).getTime()+e):new Date(new Date(t).getTime()+e),w.formatDate(a)},getTaskNewEst:function(t,e){var a=new Date(new Date(t).getTime()+60*e*1e3);return w.formatDate(a)},getTaskNewLct:function(t){if(!1===t["isMo"])return t.to;var e=null;return e=w.displayFromNowDate&&t["data"]&&2===t["data"]["mo_stat"]?new Date((new Date).getTime()+w.getTimeFromWidth(t.width)):new Date(new Date(t.est).getTime()+w.getTimeFromWidth(t.width)),w.formatDate(e)},updateTaskLctLeftByEst:function(t,e){if(w.updateFromTo){var a=e.getTime()-new Date(t.est).getTime();t.from=w.getNewDateWithTime(t.from,a),t.to=w.getNewDateWithWidth(t.from,t.width)}t.est=w.formatDate(e),t.lct=w.getNewDateWithWidth(t.est,w.getTaskWidth(t.from,t.to,t)),t.left=w.getLeftFromDate(t.est,t)},initTask:function(t){jsPlumb.ready((function(){console.log("jsplumb ready");var e=jsPlumb.getInstance({Endpoint:["Dot",{radius:2}],Connector:"Straight",HoverPaintStyle:{stroke:"#1e8151",strokeWidth:1},ConnectionOverlays:[["Arrow",{location:1,id:"arrow",length:14,foldback:.8}],["Label",{label:"",id:"label",cssClass:"aLabel"}]],Container:"gantt-body"});e.registerConnectionType("basic",{anchor:"Continuous",connector:"Straight"});var a=function(t){t.draggable,e.makeSource(t,{filter:".ep",anchor:"Continuous",connectionType:"basic",extract:{action:"the-action"}}),e.makeTarget(t,{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous",allowLoopback:!0}),e.fire("jsPlumbDemoNodeAdded",t)};e.batch((function(){var n;if(t&&t.length>0)for(var o=0;o<t.length;o++)a(t[o]);if(n){lineData=JSON.parse(n);for(var s=0;s<lineData.length;s++){var r,i=lineData[s].type;if(i)for(var l=i.length-1;l>=0;l--)if(i[l]){r=i[l];break}var d=e.connect({source:lineData[s].source,target:lineData[s].target,type:r});null!=lineData[s].label&&""!==lineData[s].label&&d.getOverlay("label").setLabel(lineData[s].label)}}})),jsPlumb.on(".gantt-body","mousedown",".gantt-task-content",(function(){})),jsPlumb.on(".gantt-body","mouseup",".gantt-task-content",(function(){})),jsPlumb.fire("jsPlumbDemoLoaded",e)}))},taskDrop:function(t,e){w.showTip=!0,t.preventDefault();var n=w.taskData,o=t.dataTransfer.getData("index"),s=t.dataTransfer.getData("cIndex"),r=n[o]["addTime"],i=n[o].tasks,l=i[s],d={},c={};if(w.allowChangeLine||e==o)if(w.taskData[e]["prodLine"])a("taskDrop",{ev:t,oldRowIndex:o,newRowIndex:e,type:"notChangeToProdLine",item:l});else{for(var g in l)d[g]=l[g];var u=w.getRowFirstBeginTask(i),f=u["firstBeginTask"];for(var p in f)c[p]=f[p];var h=w.ganttCreatedDate;if(!(new Date(l.lct).getTime()<=h.getTime()||new Date(l.est).getTime()<=h.getTime()&&new Date(l.lct).getTime()>h.getTime())){var m=t.dataTransfer.getData("id"),v=t.dataTransfer.getData("clientX"),D=t.clientX-v,k=document.getElementById(m),y=parseFloat(k.style.left),b=y+D;b<c.left&&(b=c.left),k.style.left=b+"px",l.left=k.style.left,l.width=w.getTaskWidth(l.from,l.to,l),l.est=w.getBeginDateFromLeft(l.left),l.lct=w.getTaskNewLct(l),e!=o?(w.taskData[o].tasks.splice(s,1),w.taskData[e].tasks.push(l)):b<=c.left&&(w.taskData[o].tasks.splice(s,1),w.taskData[o].tasks.unshift(l));var T={taskData:d,cIndex:s,firstBeginTask:c};w.dealTaskRelation({rowTasksData:i,dropData:T,addTime:r,rowFirstEst:c["est"]}),a("taskDrop",{ev:t,oldRowIndex:o,newRowIndex:e,item:l})}}else a("taskDrop",{ev:t,oldRowIndex:o,newRowIndex:e,type:"notAllowChangeLine",item:l})},dealTaskRelation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rowTasksData,a=t.dropData,n=t.addTime,o=void 0===n?0:n,s=t.rowFirstEst;w.useGanttCompute&&(w.sortRowTasksData(e),w.recoverRealLct(e),w.needFollow&&w.dealTaskFollow({rowTasksData:e,dropData:a,addTime:o,rowFirstEst:s}),w.sortRowTasksData(e),w.dealTaskConflict(e,o),w.sortRowTasksData(e),P(e))},sortRowTasksData:function(t){return t.sort((function(t,e){return new Date(t.est).getTime()-new Date(e.est).getTime()})),t},recoverRealLct:function(t){for(var e=0;e<t.length;e++){var a=t[e];a.width=w.getTaskWidth(a.from,a.to,a),a.lct=w.getTaskNewLct(a)}},dealTaskFollow:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rowTasksData,a=(t.dropData,t.addTime),n=void 0===a?0:a,o=t.rowFirstEst,s=new Date,r=0,i=0;i<e.length;i++){var l=e[i];[1,2,5].includes(l.data["mo_stat"])&&(new Date(l.est).getTime()<s.getTime()&&new Date(l.lct).getTime()>s.getTime()?r=l.lct:new Date(l.est).getTime()>=s.getTime()&&(r?(l.width=w.getTaskWidth(l["from"],l["to"],l),l.est=w.getTaskNewEst(r,n),l.lct=w.getTaskNewLct(l),l.left=w.getLeftFromDate(l.est,l),r=l.lct):(l.width=w.getTaskWidth(l["from"],l["to"],l),o&&(l.est=w.formatDate(o),l.lct=w.getTaskNewLct(l)),l.left=w.getLeftFromDate(l.est,l),r=l.lct)))}},dealBehindTaskFollow:function(t,e){var a=e.taskData,n=parseInt(e.cIndex);if(n!=t.length-1){var o=t[n],s=new Date(o.est).getTime()-new Date(a.est).getTime();if(a.est>o.est)for(var r=n+1;r<t.length;r++){var i=t[r];0!=i.movable&&(i.est=w.formatDate(new Date(new Date(i.est).getTime()+s)),i.lct=w.formatDate(new Date(new Date(i.lct).getTime()+s)),i.left=w.getLeftFromDate(i.est,i))}else if(new Date(o.est).getTime()<=new Date(t[n+1].est).getTime())for(var l=n+1;l<t.length;l++){var d=t[l];0!=d.movable&&(d.est=w.formatDate(new Date(new Date(d.est).getTime()+s)),d.lct=w.formatDate(new Date(new Date(d.lct).getTime()+s)),d.left=w.getLeftFromDate(d.est,d))}else{for(var c=null,g=n+1;g<t.length;g++)if(0!=t[g].movable){c=t[g];break}if(null!=c)for(var u=new Date(c.est).getTime()-new Date(a.est).getTime(),f=n+1;f<t.length;f++){var p=t[f];0!=p.movable&&(p.est=w.formatDate(new Date(new Date(p.est).getTime()-u)),p.lct=w.formatDate(new Date(new Date(p.lct).getTime()-u)),p.left=w.getLeftFromDate(p.est,p))}}}},dealTaskConflict:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0,n=0;t:for(var o=0;o<t.length-1;o++){var s=t[o];if(s["isMo"]&&2!==s["data"]["mo_stat"]&&n>0){var r=new Date(n)>new Date?new Date(n):new Date;w.updateTaskLctLeftByEst(s,r.getTime()+60*e*1e3),n=new Date(s.lct)}for(var i=o+1;i<t.length;i++){var l=t[i];if(s["isMo"]||l["isMo"]){if(a++,a>=w.maxCalCount){console.warn("gantt-vue error：dealTaskConflict");break t}if(!(new Date(l.est)-new Date(s.lct)>=60*e*1e3))if(s.data&&l.data&&2===s.data["mo_stat"]&&2===l.data["mo_stat"])(new Date(s.lct)>new Date(n)||new Date(l.lct)>new Date(n))&&(n=new Date(s.lct)>new Date(l.lct)?new Date(s.lct):new Date(l.lct));else if(s.data&&2===s.data["mo_stat"]&&!1===l["isMo"])s["isMo"]&&new Date(s.lct)>new Date(n)&&(n=new Date(s.lct));else if(!l.data||2!==l.data["mo_stat"]||!1!==s["isMo"]){if(new Date(s.est)<new Date(l.est)&&new Date(l.est)-new Date(s.lct)<60*e*1e3)if(0==l.movable)if(0==s.movable){if(!1===s["isMo"]&&!0===l["isMo"]){var d=new Date(s.lct)>new Date(n)?s.lct:n;d=new Date(d)>new Date?new Date(d):new Date,l.est=w.getTaskNewEst(d,e),l.lct=w.getNewDateWithWidth(l.est,l.width),l.left=w.getLeftFromDate(l.est,l),l.width=w.getTaskWidth(l.est,l.lct,l)}else if(!0===s["isMo"]){var c=w.getTaskWidth(s.est,s.lct,s),g=w.getTaskWidth(l.est,l.lct,l);if(s.width=parseFloat(c)+parseFloat(g),s.lct=w.getTaskNewLct(s),l["isMo"]){var u=w.getTaskNewEst(s.lct,e);w.updateTaskLctLeftByEst(l,u)}}}else{var f=w.getTaskWidth(s.est,s.lct,s),p=w.getTaskWidth(l.est,l.lct,l);if(s.width=parseFloat(f)+parseFloat(p),s.lct=w.getTaskNewLct(t[o]),l["isMo"]){var h=new Date(s.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(l,h)}}else{var m=new Date(s.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(l,m)}else if(new Date(l.est)<new Date(s.est)){if(!0===s.movable&&!1===l.movable&&new Date(l.lct)>new Date(s.est)){var v=new Date(l.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(s,v),o--,s["isMo"]&&(n=new Date(s.lct));break}if(!1!==l.movable){var D=new Date(s.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(l,D)}}else if(new Date(s.est).getTime()==new Date(l.est).getTime())if(!1===l.movable){if(!1!==s.movable){var k=new Date(l.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(s,k),o--,s["isMo"]&&(n=new Date(s.lct));break}}else{var y=new Date(s.lct).getTime()+60*e*1e3;w.updateTaskLctLeftByEst(l,y)}s["isMo"]&&new Date(s.lct)>new Date(n)&&(n=new Date(s.lct))}}}}},getRowFirstBeginTask:function(t){var e=-1,a=null;if(t&&t.length>0)for(var n=0;n<t.length;n++)"1"!=t[n].data["mo_stat"]&&"5"!=t[n].data["mo_stat"]||(null==a||new Date(a.est)>new Date(t[n].est))&&(a=t[n],e=n);return{firstBeginTask:a,index:e}},taskMouseEnter:function(t,e){if(0!=w.showTip){a("taskMouseEnter",t,e);var n="",o=w.tooltipsFormat[e["tooltips"]],s=e["tooltipsObj"];if(s)for(var r in s)if(r===w.ganttBdateKey)n+="<p>".concat(s[r],":&nbsp;&nbsp;").concat(w.formatDate(e["est"]),"</p>");else if(r===w.ganttEdateKey)n+="<p>".concat(s[r],":&nbsp;&nbsp;").concat(w.formatDate(e["lct"]),"</p>");else{var i,l;n+="<p>".concat(s[r],":&nbsp;&nbsp;").concat((null===(i=e.data["escapeObj"])||void 0===i?void 0:i[r])||(null!==(l=e.data[r])&&void 0!==l?l:""),"</p>")}else for(var d in o)if(d===w.ganttBdateKey)n+="<p>".concat(o[d],":&nbsp;&nbsp;").concat(w.formatDate(e["est"]),"</p>");else if(d===w.ganttEdateKey)n+="<p>".concat(o[d],":&nbsp;&nbsp;").concat(w.formatDate(e["lct"]),"</p>");else{var c,g;n+="<p>".concat(o[d],":&nbsp;&nbsp;").concat((null===(c=e.data["escapeObj"])||void 0===c?void 0:c[d])||(null!==(g=e.data[d])&&void 0!==g?g:""),"</p>")}var u=document.getElementsByClassName("info-panel-type-up");if(u[0]){var f=u[0];C=u[0];var p=t.target,h=document.getElementsByClassName("info-panel-content-up")[0];h.innerHTML=n,f.style.display="block";document.querySelector(".gantt");var m=document.querySelector(".info-panel-triple-up-parent");m.offsetHeight+h.offsetHeight<=t.clientY-t.offsetY-8?(L="top",f.style.top=t.pageY-t.offsetY+8+"px",f.style.left=t.pageX-25+"px",m.style.left="17px",m.style.top=null,m.style.transform="rotate(0deg)",h.style.bottom="16px"):m.offsetHeight+h.offsetHeight>window.innerHeight-t.clientY-t.target.getBoundingClientRect().height?window.innerWidth-t.clientX-25>m.offsetHeight+h.offsetWidth?(L="right",f.style.top=h.offsetHeight+t.target.getBoundingClientRect().height+8+"px",f.style.left=t.pageX+25+"px",m.style.left="-12px",m.style.top=-h.offsetHeight+t.pageY-t.offsetY-30+"px",m.style.transform="rotate(90deg)"):(L="left",f.style.top=h.offsetHeight+t.target.getBoundingClientRect().height+8+"px",f.style.left=t.pageX-h.offsetWidth-25+"px",m.style.left=h.offsetWidth-4+"px",m.style.top=-h.offsetHeight+t.pageY-t.offsetY-30+"px",m.style.transform="rotate(270deg)"):(L="bottom",f.style.top=t.pageY-t.offsetY+8+2*m.offsetHeight+h.offsetHeight+t.target.offsetHeight+"px",f.style.left=t.pageX+parseFloat(p.getBoundingClientRect().width)/2-t.offsetX-25+"px",m.style.left="18px",m.style.top=-h.offsetHeight-25+"px",m.style.transform="rotate(180deg)",h.style.bottom="17px")}else{var v=document.body,D=t.target,k=document.createElement("div");k.className="info-panel-type-up",k.style.position="fixed";var y=document.createElement("div");y.className="info-panel-content-up",y.innerHTML=n;var b=document.createElement("div");b.className="info-panel-triple-up-parent";var T=document.createElement("div");T.className="info-panel-triple-up",b.appendChild(T),k.appendChild(b),k.appendChild(y),v.append(k),C=k;document.querySelector(".gantt");b.offsetHeight+y.offsetHeight<=t.clientY-t.offsetY-8?(L="top",k.style.top=t.pageY-t.offsetY+8+"px",k.style.left=t.pageX-25+"px",b.style.left="17px",b.style.top=null,b.style.transform="rotate(0deg)",y.style.bottom="16px"):b.offsetHeight+y.offsetHeight>window.innerHeight-t.clientY-t.target.getBoundingClientRect().height?window.innerWidth-t.clientX-25>b.offsetHeight+y.offsetWidth?(L="right",k.style.top=y.offsetHeight+t.target.getBoundingClientRect().height+8+"px",k.style.left=t.pageX+25+"px",b.style.left="-12px",b.style.top=-y.offsetHeight+t.pageY-t.offsetY-30+"px",b.style.transform="rotate(90deg)"):(L="left",k.style.top=y.offsetHeight+t.target.getBoundingClientRect().height+8+"px",k.style.left=t.pageX-y.offsetWidth-25+"px",b.style.left=y.offsetWidth-4+"px",b.style.top=-y.offsetHeight+t.pageY-t.offsetY-30+"px",b.style.transform="rotate(270deg)"):(L="bottom",k.style.top=t.pageY-t.offsetY+8+2*b.offsetHeight+y.offsetHeight+t.target.offsetHeight+"px",k.style.left=t.pageX+parseFloat(D.getBoundingClientRect().width)/2-t.offsetX-25+"px",b.style.top=-y.offsetHeight-25+"px",b.style.transform="rotate(180deg)",y.style.bottom="17px")}M=document.getElementsByClassName("info-panel-content-up")[0]}},taskMouseLeave:function(t){a("taskMouseLeave",t);var e=document.getElementsByClassName("info-panel-type-up")[0];e&&(e.style.display="none")},taskMousemove:function(t){switch(L){case"top":C&&(C.style.left=t.pageX-25+"px");break;case"bottom":C&&(C.style.left=t.pageX-25+"px");break;case"left":C&&(C.style.left=t.pageX-M.offsetWidth-25+"px");break;case"right":C&&(C.style.left=t.pageX+25+"px");break;default:break}a("taskMousemove",t)},formateTheadDate:function(t){var e=new Date(t);if(!t||"Invalid Date"==e)return"";var a=e.getFullYear(),n=w.addZeroToDate(e.getMonth()+1),o=w.addZeroToDate(e.getDate()),s=w.addZeroToDate(e.getHours()),r=w.addZeroToDate(e.getMinutes());return a+"-"+n+"-"+o+" "+s+":"+r},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";if(!isNaN(new Date(t).getFullYear())){t=w.upperDateSeconds(t);var a={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length||4===RegExp.$1.length?a[n]:("00"+a[n]).substr(String(a[n]).length)));return e}},addZeroToDate:function(t){return parseInt(t)<10?"0"+t:t},createGanttTaskId:function(t,e){return"task"+t+"-"+e},isShowTask:function(t){return t["isMo"]||t["showUnplan"]},isDraggable:function(t){var e=!1;return e=t.data.hasOwnProperty("movable")?1==t.data.movable:0!=t.movable,e},widthResizeMouseDown:function(t,e,n){t.preventDefault(),t.stopPropagation();var o=w.taskData,s=o[e]["addTime"],r=o[e].tasks,i=r[n],l=new Date;if(!(new Date(i.lct).getTime()<=l.getTime()||new Date(i.est).getTime()<=l.getTime()&&new Date(i.lct).getTime()>l.getTime())){var d=t.clientX,c=t.target.parentNode,g=c.offsetWidth,u=0;document.onmousemove=function(t){u=t.clientX-d+g;var e=w.dayCellWidth/(1440/w.minScale);e=e>20?e:20,u<e&&(u=e),c.style.width=u+"px"},document.onmouseup=function(t){i.width=u+"px",i.lct=w.getNewDateWithWidth(i.est,c.style.width),w.dealTaskRelation({rowTasksData:r,addTime:s}),document.onmousemove=null,document.onmouseup=null,a("taskWidthResize",t,e,n)}}},ganttResizer:function(t){t.preventDefault(),t.stopPropagation();var e=t.clientX,a=s.value.clientWidth,n=0;document.onmousemove=function(t){n=t.clientX-e+a,n<0&&(n=0),s.value.style.width=n+"px"},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}});function D(t,e,a){if(null==a||"object"!==Object(G["a"])(a))throw new Error("请传递配置项");if(!Reflect.has(a,"key"))throw new Error("配置项对象必须包含key属性");var n=document.getElementsByClassName("contextMenu-container-row")[0];n&&(n.style.display="none");var o=document.getElementsByClassName("contextMenu-container");o.length>0&&o.forEach((function(t){return t.style.display="none"}));var s="contextMenu-container-".concat(a.key),r=document.getElementsByClassName(s)[0];if(r)return r.style.left=t.pageX+"px",r.style.top=t.pageY+"px",void(r.style.display="block");var i=document.body,l=document.createElement("div");l.className="contextMenu-container ".concat(s),l.style.position="fixed",l.style.left="".concat(t.pageX,"px"),l.style.top="".concat(t.pageY,"px");for(var d=function(t){var n=e[t],o=n.text,s=n.id,r=n.type,i=document.createElement("div");i.id=s,i.innerText=o,i.className="contextMenu-item",i.style.cursor="pointer",i.style.userSelect="none",i.addEventListener("click",(function(t){window.parent.postMessage({type:r,data:Object(_["a"])({eventPageX:t.pageX,eventPageY:t.pageY},a)},document.referrer)})),l.append(i)},c=0;c<e.length;c++)d(c);i.append(l)}function k(t){a("taskClick",t)}function y(t,e,n){t.preventDefault(),t.stopPropagation(),a("taskRowRightClick",t,n);var o=w.cellContextMenus;D(t,o,{key:"cell",index:n})}function b(t,e,n){a("taskRowClick",t,n)}function T(t,e,n,o){t.preventDefault(),t.stopPropagation();var s=document.getElementsByClassName("info-panel-type-up")[0];s&&(s.style.display="none"),a("taskRightClick",t,n,o);var r=w.contextMenus[e["tooltips"]];D(t,r,{key:e["tooltips"],index:n,cIndex:o})}function O(t,e,n,o){a("taskDragStart",{event:t,item:e,index:n,taskIndex:o});var s=document.getElementsByClassName("info-panel-type-up")[0];s&&(s.style.display="none"),w.showTip=!1,t.dataTransfer.setData("id",t.target.id),t.dataTransfer.setData("clientX",t.clientX),t.dataTransfer.setData("index",n),t.dataTransfer.setData("cIndex",o)}function j(t){t.clientX,t.clientY}function x(t,e,n,o){w.showTip=!0,t.dataTransfer.clearData(),a("taskDragEnd",{event:t,item:e,index:n,taskIndex:o})}var C=null,M=null,L="top",R=function(t){var e=t;return e||(e={taskData:w.taskData,fromDate:w.fromDate,toDate:w.toDate}),e},H=function(t){var e=t;return null!=t&&0!=t.length||(e=w.defaultData),e},F=function(t,e){for(var a,n=new Date(t[0].data.rowPbdate),o=1;o<t.length;o++){var s=t[o].data;if(s){var r=s.rowPbdate;n>new Date(r)&&(n=new Date(r))}}a=e.fromDate?n<new Date(e.fromDate)?n:new Date(e.fromDate):n,w.fromDate=new Date(a.getFullYear(),a.getMonth(),a.getDate()),w.curentDateLeft=((new Date).getTime()-new Date(w.fromDate).getTime())*w.dayCellWidth/w.oneDayTime},W=function(t,e){for(var a=0;a<t.length;a++){var n=t[a].tasks,o=t[a]["addTime"];P(n);for(var s=0;s<n.length;s++)w.convertGanttData(n[s],e);w.dealTaskRelation({rowTasksData:n,addTime:o})}},P=function(t){var e=JSON.parse(JSON.stringify(t));e.sort((function(t,e){return new Date(e["to"])-new Date(t["to"])}));for(var a=0,n=function(n){var o=e[n],s=t.findIndex((function(t){return t["data"]["mo_code"]===o["data"]["mo_code"]}));-1!==s&&(t[s]["zIndex"]=++a)},o=0;o<e.length;o++)n(o)},N=function(){var t=new MutationObserver((function(e){if(w.scrollToNowDate){var a=w.getLeftFromDate(new Date);a<0&&(a=0),l.value.style.left=-a+"px",i.value.scrollLeft=a}w.ganttHeight=o.value.style.height,t.disconnect(),t=null})),e={childList:!0,subtree:!0,attributes:!0};t.observe(d.value,e)},E=function(){var t=w.ganttRowHeight.slice(w.ganttRowHeight.length-2);w.rightContentHeight=w.leftTheadDatas.length*parseFloat(w.ganttRowHeight)+t,parseFloat(w.rightContentHeight)<parseFloat(w.gridHeight)?et("auto"):et(w.gridHeightNum+"px")},B=function(t,e){for(var a=[],n=0;n<t.length;n++){var o={};for(var s in t[n])t[n][s]instanceof Object||(o[s]=t[n][s]);for(var r=0;r<t[n].tasks.length;r++){var i=t[n].tasks[r];i["isMo"]&&(o.rowPbdate?new Date(i.est)<new Date(o.rowPbdate)&&(o.rowPbdate=i.est):o.rowPbdate=i.est,o.rowPedate?new Date(i.lct)>new Date(o.rowPedate)&&(o.rowPedate=i.lct):o.rowPedate=i.lct)}o.rowPbdate||(o.rowPbdate=t[n].data&&t[n].data.rowPbdate),o.rowPedate||(o.rowPedate=t[n].data&&t[n].data.rowPedate),a.push(o)}for(var l=0;l<a.length;l++)a[l].rowPbdate=w.formateTheadDate(a[l].rowPbdate),a[l].rowPedate=w.formateTheadDate(a[l].rowPedate);w.leftTheadDatas=a},S=function(t){for(var e,a=w.leftTheadDatas[0].rowPedate,n=1;n<w.leftTheadDatas.length;n++)new Date(a)<new Date(w.leftTheadDatas[n].rowPedate)&&(a=w.leftTheadDatas[n].rowPedate);e=t.toDate?new Date(a)>new Date(t.toDate)?new Date(a):new Date(t.toDate):new Date(a);var o=1,s=parseInt((e.getTime()-w.fromDate.getTime())/w.oneDayTime);s<4&&(o=4-s),w.toDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o)},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=R(t);w.ganttHeaderHeight=32*w.headers.length,void 0!==t.useGanttCompute&&(w.useGanttCompute=t.useGanttCompute);var a=H(e.taskData);return F(a,e),W(a,!0),B(a,e),S(e),E(),N(),w.taskData=a,w.dayList=w.getDayList(),w.rightContentWidth=w.dayList.length*w.dayCellWidth+"px",w.weekList=w.getWeekList(),w.monthList=w.getMonthList(),a},I=function(){return w.taskData},X=function(t,e){var a=w.taskData,n=a[e]["addTime"],o=a[e].tasks;t.est=t.from,t.lct=t.to,o.push(w.convertGanttData(t)),w.dealTaskRelation({rowTasksData:o,addTime:n})},J=function(t,e,a){var n=w.taskData,o=n[e]["addTime"],s=n[e].tasks,r=s[a];for(var i in t)t[i]&&(r[i]=t[i]);w.convertGanttData(r),w.dealTaskRelation({rowTasksData:s,addTime:o})},K=function(t,e){var a=w.taskData,n=a[t]["addTime"],o=a[t].tasks;o.splice(e,1),w.dealTaskRelation({rowTasksData:o,addTime:n})},A=function(t){for(var e in t)w.hasOwnProperty(e)&&t.hasOwnProperty(e)&&"function"!==typeof t[e]&&(w[e]=t[e]);t.gridHeight&&et(t.gridHeight)},q=function(t){s.value.style.width=t?0:"auto"},Z=function(t){var e=parseFloat(t);if(!(e<1)){w.dayCellWidth=w.dayStandardWidth*e,w.rightContentWidth=w.dayList.length*w.dayCellWidth+"px",w.curentDateLeft=((new Date).getTime()-new Date(w.fromDate).getTime())*w.dayCellWidth/w.oneDayTime;for(var a=w.taskData,o=0;o<a.length;o++)for(var s=a[o].tasks,r=0;r<s.length;r++){var d=s[r];d.width=w.getTaskWidth(d.est,d.lct,d),d.left=w.getLeftFromDate(d.est,d)}Object(n["f"])((function(){var t=w.getLeftFromDate(new Date);t<0&&(t=0),l.value.style.left=-t+"px",i.value.scrollLeft=t}))}},$=function(t){w.foreGroundImg=t},U=function(t){for(var e=document.querySelectorAll(".gantt-task"),a=Array.from(e),n=0;n<a.length;n++){var o=a[n];V(o,"located")}if(t){var s=document.querySelector("#"+t);z(s,"located")}},Q=function(){for(var t=document.querySelectorAll(".gantt-task"),e=Array.from(t),a=0;a<e.length;a++){var n=e[a];V(n,"located")}},tt=function(t){var e=w.taskData,a=null,n="";t:for(var o=0;o<e.length;o++)for(var s=0;s<e[o].tasks.length;s++){var r=e[o].tasks[s];if(t==r.name){var l=r.left,d=o*parseFloat(w.ganttRowHeight);i.value.scrollTo({left:l,top:d,behavior:"smooth"}),n="task"+o+"-"+s,a=r;break t}}U(n);var c={id:n,task:a};return c},et=function(t){var e=parseFloat(t);if(isNaN(e))w.gridHeight=t,i.value.style.height=t,i.value.style.overflowY="hidden";else{w.gridHeightNum=e;var a=e-parseFloat(w.ganttHeaderHeight),n=parseFloat(w.rightContentHeight);a<n?(w.gridHeight=a-25+"px",i.value.style.height=a+"px",i.value.style.overflowY="auto"):(w.gridHeight="auto",i.value.style.height="auto",i.value.style.overflowY="hidden")}},at=function(){var t=new Date;w.fromDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()-5),w.toDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()+15),0==w.defaultData.length&&(w.defaultData=[{name:"",tasks:[{name:"",color:"#FFFFFF",from:t,to:t,movable:!1,data:{pbdate:t,pedate:t}}],data:{rowPbdate:t,rowPedate:t}}])};return Object(n["t"])((function(){return w.rightContentWidth}),(function(t,e){w.curentDateLeft=((new Date).getTime()-new Date(w.fromDate).getTime())*w.dayCellWidth/w.oneDayTime}),{immediate:!0,deep:!0}),Object(n["g"])((function(){at()})),Object(n["j"])((function(){window.addEventListener("scroll",w.ganttBodyScroll,!0),Y()})),Object(n["i"])((function(){u=[]})),Object(n["h"])((function(){window.removeEventListener("scroll",w.ganttBodyScroll,!0)})),{state:w,gantt:o,ganttSideRef:s,area:r,ganttBodyParentRef:i,ganttHeaderColumnsRef:l,ganttBodyRows:d,ganttTask:m,ganttLeftBgBody:g,ganttTreeBodyRefs:u,ganttTableContent1:f,ganttTableContent2:p,refreshGantt:Y,ganttBodyForeground:c,getGanttData:I,editTask:J,addNonProdTask:X,delNonProdTask:K,setOptions:A,hideLeftHead:q,scaleContainer:Z,setForeGroundImg:$,locateTask:tt,removeLocatedClass:Q,setGridHeight:et,setGanttTreeBodyRef:v,taskClick:k,taskRowRightClick:y,taskRowClick:b,taskRightClick:T,taskDragStart:O,taskDraging:j,taskDragEnd:x}}};a("f124"),a("ad9c");J.render=X,J.__scopeId="data-v-4094dbd2";var K=J,A={components:{LeftThead:K},props:{title:String},emits:{},setup:function(t,e){e.emit;var a=Object(n["o"])("sonRef"),o=Object(n["n"])({canPostMessage:!0,hideLeftHead:function(t){u(t.target.checked)},scaleContainer:function(t){var e=parseInt(t.target.value);f(e)}}),s=function(){var t=document.getElementsByClassName("contextMenu-container");t.length>0&&t.forEach((function(t){return t.style.display="none"}));var e=document.getElementsByClassName("contextMenu-container-row");e.length>0&&e.forEach((function(t){return t.style.display="none"}))};Object(n["j"])((function(){window.parent.ganttVueMethods={},window.parent.ganttVueMethods.getGanttData=r,window.parent.ganttVueMethods.setOptions=i,window.parent.ganttVueMethods.refreshGantt=l,window.parent.ganttVueMethods.editTask=d,window.parent.ganttVueMethods.addNonProdTask=c,window.parent.ganttVueMethods.delNonProdTask=g,window.parent.ganttVueMethods.hideLeftHead=u,window.parent.ganttVueMethods.scaleContainer=f,window.parent.ganttVueMethods.setForeGroundImg=p,window.parent.ganttVueMethods.locateTask=h,window.parent.ganttVueMethods.removeLocatedClass=m,window.parent.ganttVueMethods.setGridHeight=v,window.parent.ganttVueMethods.hiddenContextMenus=s,document.addEventListener("click",(function(t){o.canPostMessage&&window.parent.postMessage({type:"documentClick",data:{eventPageX:t.pageX,eventPageY:t.pageY}},document.referrer),s()})),window.addEventListener("message",(function(t){var e=t.data,n=e.data;switch(e.type){case"setOptions":a.value.setOptions(n);break;case"refreshGantt":o.data=a.value.refreshGantt(e);break;case"editTask":d(task,n.index,n.cIndex);break;case"addNonProdTask":c(task,n.index);break;case"delNonProdTask":g(n.index,n.cIndex);break;default:break}}),!1)}));var r=function(){return a.value.getGanttData()},i=function(t){a.value.setOptions(t)},l=function(t){o.data=a.value.refreshGantt(t)},d=function(t,e,n){a.value.editTask(t,e,n)},c=function(t,e,n){a.value.addNonProdTask(t,e,n)},g=function(t,e){a.value.delNonProdTask(t,e)},u=function(t){a.value.hideLeftHead(t)},f=function(t){a.value.scaleContainer(t)},p=function(t){a.value.setForeGroundImg(t)},h=function(t){return a.value.locateTask(t)},m=function(){a.value.removeLocatedClass()},v=function(t){a.value.setGridHeight(t)},w=function(t){var e=t.index,a=t.taskIndex;o.canPostMessage&&window.parent.postMessage({type:"taskDragStart",data:{index:e,taskIndex:a}},document.referrer)},D=function(t){var e=t.item,a=t.index,n=t.taskIndex;o.canPostMessage&&window.parent.postMessage({type:"taskDragEnd",item:JSON.parse(JSON.stringify(e)),index:a,taskIndex:n},document.referrer)},k=function(t,e){o.canPostMessage&&window.parent.postMessage({type:"taskMouseEnter",data:{disX:t.pageX,disY:t.pageY-t.offsetY,taskData:JSON.stringify(e)}},document.referrer)},y=function(t){o.canPostMessage&&window.parent.postMessage({type:"taskMouseLeave"},document.referrer)},b=function(t){o.canPostMessage&&window.parent.postMessage({type:"taskMousemove",data:{disX:t.pageX,disY:t.pageY-t.offsetY}},document.referrer)},T=function(t,e,a){o.canPostMessage&&window.parent.postMessage({type:"taskWidthResize",data:{index:e,cIndex:a}},document.referrer)},O=function(t){console.log("app.vue taskClick",t.target)},j=function(t,e,a){var n=o.data[e].tasks,s=n[a];o.canPostMessage&&window.parent.postMessage({type:"taskRightClick",data:{eventPageX:t.pageX,eventPageY:t.pageY,index:e,cIndex:a,taskData:JSON.stringify(s)}},document.referrer)},x=function(t,e){if(o.canPostMessage)window.parent.postMessage({type:"taskRowRightClick",data:{eventPageX:t.pageX,eventPageY:t.pageY,index:e}},document.referrer);else{var a=document.getElementsByClassName("contextMenu-container")[0];a&&(a.style.display="none");var n=document.getElementsByClassName("contextMenu-container-row")[0];n&&(n.style.left=t.pageX+"px",n.style.top=t.pageY+"px",n.style.display="block")}},C=function(t,e){o.canPostMessage&&window.parent.postMessage({type:"taskRowClick",data:{index:e}},document.referrer)},M=function(t){t.ev;var e=t.oldRowIndex,a=t.newRowIndex,n=t.type,s=t.item;o.canPostMessage&&window.parent.postMessage({type:"taskDrop",data:{oldRowIndex:e,newRowIndex:a,type:n,item:JSON.stringify(s)}},document.referrer)},L=function(t,e,n){var s=n,r=o.data[e].tasks,i=r[s];layui.use("layer",(function(){var n=layui.layer,o="",r="",l={elem:"#est",type:"datetime"},d={elem:"#lct",type:"datetime"};"add"==t?(r="添加非生产计划",o='<div class="layer-item"><span>名称：</span><input id="taskName"/></div>'):"edit"==t&&(r="修改计划",l.value=i.est,d.value=i.lct,o='<div class="layer-item"><span>工单名称：</span><span>'+i.name+"</span></div>"),o+='<div class="layer-item"><span>计划开始时间：</span><input id="est" readonly/></div>',o+='<div class="layer-item"><span>计划结束时间：</span><input id="lct" readonly/></div>',"add"==t?o+='<div class="layer-item"><span>背景色：</span><input id="bgColor" type="color" value="#FFFF00"/></div>':"edit"==t&&(o+='<div class="layer-item"><span>背景色：</span><input id="bgColor" type="color" value="'+i.color+'"/></div>'),n.open({title:r,type:1,content:o,area:["350px","auto"],btn:["确定","取消"],success:function(t){layui.use("laydate",(function(){var t=layui.laydate;t.render(l),t.render(d)}))},yes:function(o,r){var i=document.getElementById("bgColor").value,l=document.getElementById("est").value,d=document.getElementById("lct").value,c={color:i,from:l,to:d};"add"==t?(c.name=document.getElementById("taskName").value,a.value.addNonProdTask(c,e,s)):"edit"==t&&a.value.editTask(c,e,s),n.close(o)},btn2:function(t,e){n.close(t)}})}))};return{sonRef:a,state:o,taskMouseEnter:k,taskMouseLeave:y,taskMousemove:b,taskWidthResize:T,taskDragStart:w,taskDragEnd:D,taskClick:O,taskRightClick:j,taskRowRightClick:x,taskRowClick:C,taskDrop:M,dealTaskLayer:L,m_getGanttData:r,m_setOptions:i,m_refreshGantt:l,m_editTask:d,m_addNonProdTask:c,m_delNonProdTask:g,m_hideLeftHead:u,m_scaleContainer:f,m_setForeGroundImg:p}}};a("da3a");A.render=s;var q=A,Z=a("5502"),$=Object(Z["a"])({state:{},mutations:{},actions:{},modules:{}}),U=a("e193"),Q=a.n(U),tt=Object(n["b"])(q);tt.config.globalProperties.$jsplumb=Q.a,tt.use($),tt.mount("#app")},ad9c:function(t,e,a){"use strict";a("afe3")},afe3:function(t,e,a){},c781:function(t,e,a){},cc3e:function(t,e,a){},da3a:function(t,e,a){"use strict";a("cc3e")},f124:function(t,e,a){"use strict";a("c781")}});
//# sourceMappingURL=app.js.map